<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SA Fund Recovery ‚Äî Client Intake Form</title>
<style>
  /* Reset & Base */
  *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI', system-ui, -apple-system, Arial, sans-serif}
  body{background:linear-gradient(135deg, #f5f9ff 0%, #eef5ff 100%);color:#1a365d;line-height:1.5;min-height:100vh}
  
  /* Container & Layout */
  .container{max-width:800px;margin:30px auto;background:#fff;padding:30px;border-radius:16px;box-shadow:0 12px 40px rgba(0, 87, 184, 0.08);border:1px solid #e2e8f0}
  @media(max-width:840px){.container{margin:15px;padding:20px}}
  
  /* Header - Fixed to prevent hiding content */
  header{text-align:center;margin-bottom:24px;padding-bottom:20px;border-bottom:2px solid #f1f5f9;position:relative}
  header img{width:70px;height:70px;border-radius:12px;object-fit:cover;border:3px solid #0057b8;margin-bottom:12px;box-shadow:0 4px 8px rgba(0, 87, 184, 0.15)}
  h1{font-size:26px;color:#0057b8;margin-bottom:6px;font-weight:700;letter-spacing:-0.3px}
  .subtitle{color:#4a5568;font-size:15px;max-width:600px;margin:0 auto;line-height:1.5}
  
  /* Progress Indicator */
  .progress{display:flex;gap:10px;align-items:center;margin:28px 0;position:relative}
  .step-dot{width:38px;height:38px;border-radius:50%;background:#e2e8f0;color:#718096;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:15px;transition:all 0.3s ease;position:relative;z-index:2}
  .step-dot.active{background:linear-gradient(135deg,#0057b8,#1e7fd1);color:#fff;box-shadow:0 4px 12px rgba(0, 87, 184, 0.25)}
  .step-dot.completed{background:#0e9f6e;color:#fff}
  .step-dot::after{content:attr(data-title);position:absolute;top:45px;left:50%;transform:translateX(-50%);white-space:nowrap;font-size:12px;color:#718096;font-weight:500}
  .step-dot.active::after{color:#0057b8;font-weight:600}
  .bar{flex:1;height:4px;background:#e2e8f0;border-radius:2px;position:relative;overflow:hidden}
  .bar.active{background:linear-gradient(90deg,#0e9f6e,#0057b8)}
  
  /* Form Steps */
  form{display:block}
  .step{display:none;animation:fadeIn 0.4s ease}
  .step.active{display:block}
  @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
  
  /* Form Controls */
  label{display:block;margin:16px 0 8px;font-weight:600;color:#2d3748;font-size:14px}
  .required::after{content:" *";color:#e53e3e;font-weight:700}
  
  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="date"],
  select,
  textarea {
    width:100%;
    padding:14px 16px;
    border-radius:10px;
    border:2px solid #e2e8f0;
    font-size:15px;
    color:#2d3748;
    background:#fff;
    transition:all 0.25s ease;
    margin-top:2px;
  }
  
  /* Focus States */
  input:focus,
  select:focus,
  textarea:focus {
    outline:none;
    border-color:#0057b8;
    box-shadow:0 0 0 3px rgba(0, 87, 184, 0.15);
    background:#f8fafc;
  }
  
  /* Improved Form Rows */
  .row{display:flex;gap:16px;margin-top:8px}
  .row > div{flex:1}
  @media(max-width:720px){.row{flex-direction:column;gap:0}}
  
  /* Textarea */
  textarea{min-height:130px;resize:vertical;line-height:1.5;font-family:inherit}
  
  /* Buttons */
  .btn-container{display:flex;gap:12px;margin-top:28px;flex-wrap:wrap}
  .btn{
    padding:14px 28px;
    border-radius:10px;
    border:none;
    background:linear-gradient(135deg,#0057b8,#1e7fd1);
    color:#fff;
    font-weight:600;
    cursor:pointer;
    font-size:15px;
    transition:all 0.25s ease;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    min-width:120px;
  }
  .btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px rgba(0, 87, 184, 0.2)}
  .btn:active:not(:disabled){transform:translateY(0)}
  .btn:disabled{opacity:0.6;cursor:not-allowed}
  .btn.secondary{background:#f1f5f9;color:#4a5568;border:2px solid #e2e8f0}
  .btn.secondary:hover:not(:disabled){background:#e2e8f0;box-shadow:0 4px 12px rgba(0, 0, 0, 0.08)}
  
  /* Form Groups & Spacing */
  .form-group{margin-bottom:20px}
  .note{font-size:13px;color:#718096;margin-top:6px;font-style:italic}
  
  /* File Input */
  .file-input-wrapper{position:relative;margin-top:6px}
  .file-input-label{
    display:block;
    padding:14px 16px;
    border:2px dashed #cbd5e0;
    border-radius:10px;
    text-align:center;
    color:#718096;
    cursor:pointer;
    transition:all 0.25s ease;
    background:#f8fafc;
  }
  .file-input-label:hover{border-color:#0057b8;color:#0057b8}
  .file-input-label.dragover{border-color:#0e9f6e;background:#f0fff4}
  #evidence{display:none}
  
  /* Checkboxes */
  .checkbox-group{
    margin-top:24px;
    background:#f8fafc;
    padding:20px;
    border-radius:10px;
    border-left:4px solid #0057b8;
  }
  .checkbox-item{
    display:flex;
    align-items:flex-start;
    margin-bottom:14px;
    padding-bottom:14px;
    border-bottom:1px solid #e2e8f0;
  }
  .checkbox-item:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}
  .checkbox-item input{margin-top:4px;margin-right:12px;min-width:18px;height:18px}
  .checkbox-item label{font-weight:500;color:#2d3748;cursor:pointer;margin:0;line-height:1.5}
  
  /* Messages */
  .privacy{
    margin-top:28px;
    padding:18px;
    background:#ebf8ff;
    border-left:4px solid #0057b8;
    border-radius:10px;
    color:#2d3748;
    font-size:14px;
    line-height:1.5;
  }
  .privacy strong{color:#0057b8}
  
  .success{
    margin-top:24px;
    padding:22px;
    background:#f0fff4;
    border-left:4px solid #0e9f6e;
    border-radius:10px;
    color:#03543f;
    animation:fadeIn 0.5s ease;
  }
  .error{
    margin-top:24px;
    padding:22px;
    background:#fff5f5;
    border-left:4px solid #e53e3e;
    border-radius:10px;
    color:#742a2a;
  }
  
  /* Case ID */
  .case-id{
    background:#ebf8ff;
    padding:14px;
    border-radius:10px;
    margin:16px 0;
    font-family:'SF Mono', 'Cascadia Mono', monospace;
    color:#0057b8;
    border:1px solid #bee3f8;
    font-size:15px;
  }
  
  /* Required Field Indicator */
  .required-hint{
    text-align:right;
    font-size:12px;
    color:#718096;
    margin-top:8px;
    margin-bottom:16px;
  }
  .required-hint::before{content:"* ";color:#e53e3e}
  
  /* Form Validation */
  input:invalid, select:invalid, textarea:invalid{
    border-color:#e53e3e;
    background-color:#fff5f5;
  }
  .error-message{
    color:#e53e3e;
    font-size:13px;
    margin-top:6px;
    display:none;
  }
  
  /* Loading State */
  .btn.loading{position:relative;color:transparent}
  .btn.loading::after{
    content:"";
    position:absolute;
    width:18px;
    height:18px;
    border:2px solid #fff;
    border-radius:50%;
    border-top-color:transparent;
    animation:spin 0.8s linear infinite;
  }
  @keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>
  <div class="container">
    <header>
      <img src="https://i.postimg.cc/dtS0nhFX/IMG-20251201-WA0006.jpg" alt="SA Fund Recovery Logo">
      <h1>SA FUND RECOVERY ‚Äî Client Intake Form</h1>
      <p class="subtitle">Complete the steps to submit your case. Your information will be sent directly to our secure recovery team. All communication is confidential.</p>
    </header>

    <div class="progress" aria-hidden="true">
      <div class="step-dot active" data-step="1" data-title="Personal Info">1</div>
      <div class="bar"></div>
      <div class="step-dot" data-step="2" data-title="Case Details">2</div>
      <div class="bar"></div>
      <div class="step-dot" data-step="3" data-title="Review & Submit">3</div>
    </div>

    <div class="required-hint">Indicates required field</div>

    <form id="wizardForm" novalidate>

      <!-- STEP 1: Personal Information -->
      <div class="step active" data-step="1">
        <div class="form-group">
          <label class="required" for="fullName">Full name</label>
          <input id="fullName" name="fullName" type="text" required placeholder="Enter your full legal name">
        </div>

        <div class="form-group">
          <label class="required" for="email">Email address</label>
          <input id="email" name="email" type="email" required placeholder="your.email@example.com">
        </div>

        <div class="form-group">
          <label class="required" for="phone">Phone number</label>
          <input id="phone" name="phone" type="tel" placeholder="+27 12 345 6789" required>
        </div>

        <div class="btn-container">
          <button type="button" class="btn" id="toStep2">Continue ‚Üí</button>
        </div>
      </div>

      <!-- STEP 2: Case Details -->
      <div class="step" data-step="2">
        <div class="form-group">
          <label for="contactMethod">Preferred contact method</label>
          <select id="contactMethod" name="contactMethod">
            <option value="Email">Email</option>
            <option value="Phone">Phone</option>
            <option value="WhatsApp">WhatsApp</option>
          </select>
        </div>

        <div class="form-group">
          <label class="required" for="issueType">Type of issue</label>
          <select id="issueType" name="issueType" required>
            <option value="">Select issue type</option>
            <option>Investment scam</option>
            <option>Unauthorized deduction</option>
            <option>Online purchase scam</option>
            <option>Fraudulent website</option>
            <option>Romance scam</option>
            <option>Cryptocurrency scam</option>
            <option>Other</option>
          </select>
        </div>

        <div class="row">
          <div class="form-group">
            <label for="amount">Amount lost (ZAR)</label>
            <input id="amount" name="amount" type="number" min="0" step="100" placeholder="e.g. 4500">
          </div>
          <div class="form-group">
            <label for="dateIncident">Date of incident</label>
            <input id="dateIncident" name="dateIncident" type="date">
          </div>
        </div>

        <div class="form-group">
          <label for="platform">Platform / person involved (if known)</label>
          <input id="platform" name="platform" type="text" placeholder="Website, company, or person's name">
        </div>

        <div class="btn-container">
          <button type="button" class="btn secondary" id="backTo1">‚Üê Back</button>
          <button type="button" class="btn" id="toStep3">Continue ‚Üí</button>
        </div>
      </div>

      <!-- STEP 3: Description & Submission -->
      <div class="step" data-step="3">
        <div class="form-group">
          <label class="required" for="description">What happened?</label>
          <textarea id="description" name="description" required placeholder="Please provide as much detail as possible. Include dates, communication details, transaction IDs, URLs, account numbers, and any other relevant information that could help our team..."></textarea>
        </div>

        <div class="form-group">
          <label for="evidence">Attach evidence (optional)</label>
          <div class="file-input-wrapper">
            <label for="evidence" class="file-input-label" id="fileInputLabel">
              üìé Click to select files or drag & drop<br>
              <small>Supports: JPG, PNG, PDF, DOC, TXT (Max 10MB total)</small>
            </label>
            <input id="evidence" name="evidence" type="file" multiple accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.txt">
          </div>
          <div class="note" id="fileInfo">No files selected</div>
        </div>

        <div class="checkbox-group">
          <div class="checkbox-item">
            <input id="confirm1" type="checkbox" required>
            <label for="confirm1">I confirm that the information provided is accurate to the best of my knowledge</label>
          </div>
          <div class="checkbox-item">
            <input id="confirm2" type="checkbox" required>
            <label for="confirm2">I understand that SA Fund Recovery will never ask for OTPs, banking passwords, card details, or upfront fees for recovery services</label>
          </div>
        </div>

        <div class="btn-container">
          <button type="button" class="btn secondary" id="backTo2">‚Üê Back</button>
          <button type="button" class="btn" id="submitBtn">Submit Case</button>
        </div>

        <!-- Success Message -->
        <div id="successSection" style="display:none;">
          <div class="success">
            <strong style="font-size:17px;">‚úì Case submitted successfully!</strong><br><br>
            
            <strong>Important Next Steps:</strong><br>
            1. Your email client has opened with a pre-filled message<br>
            2. Please <strong>review the information carefully</strong><br>
            3. <strong>Attach any evidence files</strong> to the email if you have them<br>
            4. Click <strong style="color:#0057b8;">SEND</strong> in your email client<br><br>
            
            <div class="case-id">
              <strong>Case Reference:</strong> <span id="caseNumber">SAF-000000</span><br>
              Please quote this number in all correspondence
            </div>
            
            <p style="margin-top:14px; font-size:14px; color:#03543f;">
              <em>Our recovery team will contact you within <strong>24-48 hours</strong> during business hours (Monday-Friday, 9am-5pm SAST).</em>
            </p>
            
            <div style="margin-top:16px; padding-top:16px; border-top:1px solid #c6f6d5;">
              <small>If your email client didn't open automatically, please email us directly at <strong>safundrecovery@gmail.com</strong> with the above case reference.</small>
            </div>
          </div>
        </div>

        <!-- Error Message -->
        <div id="errorSection" style="display:none;">
          <div class="error">
            <strong style="font-size:17px;">‚úó Unable to open email client</strong><br><br>
            Please try one of these alternatives:<br><br>
            1. <strong>Try submitting again</strong> - sometimes browser settings block automatic email opening<br>
            2. <strong>Email us directly</strong> at: <strong>safundrecovery@gmail.com</strong><br>
            3. <strong>Call/WhatsApp</strong>: <strong>+27 74 459 7810</strong><br><br>
            
            <div style="margin-top:12px; padding:12px; background:#fff; border-radius:6px;">
              <small>Copy this information to include in your email:<br>
              Case ID: <span id="manualCaseNumber">SAF-000000</span><br>
              Name: <span id="manualName">Your Name</span></small>
            </div>
          </div>
        </div>
      </div>

      <div class="privacy">
        <strong>üîí Your Security & Privacy</strong><br>
        ‚Ä¢ Information is sent directly to our secure email system<br>
        ‚Ä¢ No data is stored on this website<br>
        ‚Ä¢ All communication is encrypted and confidential<br>
        ‚Ä¢ You maintain full control over what information is shared<br>
        ‚Ä¢ We comply with South African POPIA regulations
      </div>
    </form>
  </div>

<script>
  // DOM Elements
  const steps = Array.from(document.querySelectorAll('.step'));
  const dots = Array.from(document.querySelectorAll('.step-dot'));
  const bars = Array.from(document.querySelectorAll('.bar'));
  
  // Current step
  let currentStep = 0;
  
  // Show specific step
  function showStep(idx) {
    // Update current step
    currentStep = idx;
    
    // Hide all steps
    steps.forEach(step => step.classList.remove('active'));
    
    // Show target step
    steps[idx].classList.add('active');
    
    // Update progress dots
    dots.forEach((dot, i) => {
      dot.classList.remove('active', 'completed');
      if (i === idx) {
        dot.classList.add('active');
      } else if (i < idx) {
        dot.classList.add('completed');
      }
    });
    
    // Update progress bars
    bars.forEach((bar, i) => {
      bar.classList.remove('active');
      if (i < idx) {
        bar.classList.add('active');
      }
    });
    
    // Focus on first input in step
    setTimeout(() => {
      const firstInput = steps[idx].querySelector('input, select, textarea');
      if (firstInput && firstInput.type !== 'file') {
        firstInput.focus();
      }
    }, 100);
  }
  
  // Generate case ID
  function generateCaseId() {
    const prefix = 'SAF';
    const date = new Date();
    const year = date.getFullYear().toString().slice(-2);
    const month = (date.getMonth() + 1).toString().padStart(2, '0');
    const day = date.getDate().toString().padStart(2, '0');
    const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
    return `${prefix}-${year}${month}${day}-${random}`;
  }
  
  // Format date for display
  function formatDate(dateString) {
    if (!dateString) return 'Not specified';
    const date = new Date(dateString);
    return date.toLocaleDateString('en-ZA', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });
  }
  
  // Format amount with R
  function formatAmount(amount) {
    if (!amount || amount === '0' || amount === '') return 'Not specified';
    return 'R ' + parseInt(amount).toLocaleString('en-ZA');
  }
  
  // File input handling
  const fileInput = document.getElementById('evidence');
  const fileInputLabel = document.getElementById('fileInputLabel');
  const fileInfo = document.getElementById('fileInfo');
  
  if (fileInput) {
    fileInput.addEventListener('change', function() {
      if (this.files.length > 0) {
        const fileList = Array.from(this.files);
        const totalSize = fileList.reduce((sum, file) => sum + file.size, 0);
        const sizeMB = (totalSize / (1024 * 1024)).toFixed(2);
        
        fileInfo.textContent = `${this.files.length} file(s) selected (${sizeMB} MB)`;
        fileInfo.style.color = '#0e9f6e';
        fileInputLabel.style.borderColor = '#0e9f6e';
        fileInputLabel.style.background = '#f0fff4';
      } else {
        fileInfo.textContent = 'No files selected';
        fileInfo.style.color = '#718096';
        fileInputLabel.style.borderColor = '#cbd5e0';
        fileInputLabel.style.background = '#f8fafc';
      }
    });
    
    // Drag and drop
    fileInputLabel.addEventListener('dragover', (e) => {
      e.preventDefault();
      fileInputLabel.classList.add('dragover');
    });
    
    fileInputLabel.addEventListener('dragleave', () => {
      fileInputLabel.classList.remove('dragover');
    });
    
    fileInputLabel.addEventListener('drop', (e) => {
      e.preventDefault();
      fileInputLabel.classList.remove('dragover');
      fileInput.files = e.dataTransfer.files;
      fileInput.dispatchEvent(new Event('change'));
    });
  }
  
  // Step 1 validation
  document.getElementById('toStep2').addEventListener('click', () => {
    const name = document.getElementById('fullName').value.trim();
    const email = document.getElementById('email').value.trim();
    const phone = document.getElementById('phone').value.trim();
    
    let isValid = true;
    
    // Name validation
    if (!name) {
      alert('Please enter your full name');
      document.getElementById('fullName').focus();
      isValid = false;
    }
    
    // Email validation
    if (isValid && (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email))) {
      alert('Please enter a valid email address');
      document.getElementById('email').focus();
      isValid = false;
    }
    
    // Phone validation (basic)
    if (isValid && !phone) {
      alert('Please enter your phone number');
      document.getElementById('phone').focus();
      isValid = false;
    }
    
    if (isValid) {
      showStep(1);
    }
  });
  
  // Step 2 validation
  document.getElementById('toStep3').addEventListener('click', () => {
    const issue = document.getElementById('issueType').value;
    
    if (!issue) {
      alert('Please select the type of issue');
      document.getElementById('issueType').focus();
      return;
    }
    
    showStep(2);
  });
  
  // Back buttons
  document.getElementById('backTo1').addEventListener('click', () => showStep(0));
  document.getElementById('backTo2').addEventListener('click', () => showStep(1));
  
  // Main submission
  document.getElementById('submitBtn').addEventListener('click', async function(e) {
    e.preventDefault();
    
    // Validation
    const desc = document.getElementById('description').value.trim();
    if (!desc) {
      alert('Please provide a description of what happened');
      document.getElementById('description').focus();
      return;
    }
    
    if (!document.getElementById('confirm1').checked || !document.getElementById('confirm2').checked) {
      alert('Please complete both confirmations before submitting');
      return;
    }
    
    // Disable button and show loading
    const submitBtn = this;
    submitBtn.disabled = true;
    submitBtn.classList.add('loading');
    submitBtn.textContent = 'Preparing submission...';
    
    // Hide previous messages
    document.getElementById('successSection').style.display = 'none';
    document.getElementById('errorSection').style.display = 'none';
    
    try {
      // Generate case ID
      const caseId = generateCaseId();
      document.getElementById('caseNumber').textContent = caseId;
      document.getElementById('manualCaseNumber').textContent = caseId;
      document.getElementById('manualName').textContent = document.getElementById('fullName').value;
      
      // Collect form data
      const formData = {
        fullName: document.getElementById('fullName').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        contactMethod: document.getElementById('contactMethod').value,
        issueType: document.getElementById('issueType').value,
        amount: document.getElementById('amount').value,
        dateIncident: document.getElementById('dateIncident').value,
        platform: document.getElementById('platform').value.trim(),
        description: desc,
        submissionDate: new Date().toLocaleString('en-ZA', {
          timeZone: 'Africa/Johannesburg',
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        }),
        caseId: caseId
      };
      
      // Create email
      const recipientEmail = "safundrecovery@gmail.com";
      const subject = `[SA Fund Recovery] Case #${caseId} - ${formData.fullName} - ${formData.issueType}`;
      
      const emailBody = `
SA FUND RECOVERY - NEW CASE SUBMISSION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üìã CASE INFORMATION
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚Ä¢ Case ID: ${caseId}
‚Ä¢ Submission Date: ${formData.submissionDate}
‚Ä¢ Issue Type: ${formData.issueType}
‚Ä¢ Priority: Standard

üë§ CLIENT DETAILS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚Ä¢ Full Name: ${formData.fullName}
‚Ä¢ Email: ${formData.email}
‚Ä¢ Phone: ${formData.phone}
‚Ä¢ Preferred Contact: ${formData.contactMethod}

üí∞ FINANCIAL DETAILS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚Ä¢ Amount Lost: ${formatAmount(formData.amount)}
‚Ä¢ Date of Incident: ${formatDate(formData.dateIncident)}
‚Ä¢ Platform/Person Involved: ${formData.platform || 'Not specified'}

üìù INCIDENT DESCRIPTION
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${formData.description}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üìé Evidence Attached: ${fileInput.files.length > 0 ? 'Yes' : 'No'}
This case was submitted via the SA Fund Recovery online intake form.
Please respond within 24-48 hours during business hours.

‚ö†Ô∏è  IMPORTANT CLIENT CONFIRMATIONS:
   ‚úì Information confirmed as accurate
   ‚úì Client understands we will NEVER ask for:
        - OTPs, PINs, or passwords
        - Banking login details
        - Upfront fees for recovery services
        - Card details or CVV numbers
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      `;
      
      // Create mailto link
      const mailtoLink = `mailto:${recipientEmail}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
      
      // Try to open email client
      const emailWindow = window.open(mailtoLink, '_blank');
      
      // Check if opened successfully
      setTimeout(() => {
        if (emailWindow && !emailWindow.closed) {
          // Success
          submitBtn.textContent = 'Email Opened ‚úì';
          submitBtn.classList.remove('loading');
          
          // Show success message
          document.getElementById('successSection').style.display = 'block';
          document.getElementById('successSection').scrollIntoView({ 
            behavior: 'smooth', 
            block: 'nearest' 
          });
          
          // Reset form after delay
          setTimeout(() => {
            showStep(0);
            document.getElementById('wizardForm').reset();
            document.getElementById('successSection').style.display = 'none';
            document.getElementById('fileInfo').textContent = 'No files selected';
            submitBtn.textContent = 'Submit Case';
            submitBtn.disabled = false;
          }, 30000); // 30 seconds for user to send email
          
        } else {
          // Failed to open email
          submitBtn.classList.remove('loading');
          submitBtn.textContent = 'Submit Case';
          submitBtn.disabled = false;
          
          // Show error message
          document.getElementById('errorSection').style.display = 'block';
          document.getElementById('errorSection').scrollIntoView({ 
            behavior: 'smooth', 
            block: 'nearest' 
          });
        }
      }, 1500);
      
    } catch (error) {
      console.error('Submission error:', error);
      
      // Reset button
      submitBtn.classList.remove('loading');
      submitBtn.textContent = 'Submit Case';
      submitBtn.disabled = false;
      
      // Show error
      document.getElementById('errorSection').style.display = 'block';
      document.getElementById('errorSection').scrollIntoView({ 
        behavior: 'smooth', 
        block: 'nearest' 
      });
    }
  });
  
  // Auto-focus on first input
  document.getElementById('fullName').focus();
</script>
</body>
</html>
